---
title: ClickHouse
description: یاد بگیرید چطور متابیس را به پایگاه‌دادهٔ ClickHouse وصل کنید، از جمله تنظیمات اتصال، انتخاب دیتابیس و پیکربندی SSL.
---

# ClickHouse

برای اضافه کردن یک اتصال پایگاه‌داده، روی آیکون **چرخ‌دنده** در بالا سمت راست کلیک کنید و به **Admin settings** > **Databases** > **Add a database** بروید.

می‌توانید هر زمان این تنظیمات را ویرایش کنید؛ فقط یادتان باشد تغییرات را ذخیره کنید.

## Connection و Sync

بعد از اتصال به پایگاه‌داده، بخشی با عنوان «Connection and sync» می‌بینید که وضعیت فعلی اتصال و گزینه‌های مدیریت اتصال پایگاه‌داده را نمایش می‌دهد.

در این بخش می‌توانید [schema پایگاه‌داده را sync کنید و مقادیر فیلدها را دوباره اسکن کنید](../sync-scan.md) و جزئیات اتصال را ویرایش کنید.

## ویرایش جزئیات اتصال

برای دیدن یا تغییر تنظیمات اتصال پایگاه‌داده، روی دکمهٔ **Edit connection details** کلیک کنید.

### Connection string

می‌توانید یک connection string اینجا paste کنید تا فیلدهای باقی‌مانده به‌طور خودکار پر شوند.

### Display name

نام نمایشی پایگاه‌داده در رابط متابیس.

### Host

آدرس IP پایگاه‌داده (مثلاً `98.137.149.56`) یا نام دامنهٔ آن (مثلاً `name.database.com`).

### Port

پورت پایگاه‌داده (مثلاً `8123`).

### Username

نام کاربری پایگاه‌داده برای اکانتی که می‌خواهید با آن به دیتابیس وصل شوید. می‌توانید چند اتصال مختلف به همان پایگاه‌داده بسازید که هرکدام از یک کاربر متفاوت با مجموعهٔ متفاوتی از [سطوح دسترسی (privileges)](../users-roles-privileges.md) استفاده می‌کنند.

### Password

رمز عبوری که برای نام کاربری اتصال به پایگاه‌داده استفاده می‌کنید.

### Databases

همهٔ دیتابیس‌هایی را که می‌خواهید در متابیس روی آن‌ها پرس‌وجو بزنید اینجا بنویسید. دیتابیس‌ها را با فاصله از هم جدا کنید، مثل: `db1 db2 db3`.

### Scan all databases

همهٔ جدول‌های موجود در تمام پایگاه‌داده‌های ClickHouse (به‌جز دیتابیس‌های سیستمی) را اسکن می‌کند.

### استفاده از اتصال امن (SSL)

[SSL certificates](../ssl-certificates.md) را ببینید.

### استفاده از SSH tunnel

اگر اتصال مستقیم به پایگاه‌داده ممکن نباشد، می‌توانید از SSH tunnel استفاده کنید. [SSH tunneling](../ssh-tunnel.md) را ببینید.

### غیرفعال کردن تنظیمات proxy سراسری سیستم

به‌طور پیش‌فرض، تنظیمات proxy سراسری سیستم برای این اتصال غیرفعال هستند. می‌توانید با این گزینه آن‌ها را غیرفعال/کنترل کنید.

### تنظیمات ClickHouse (جداشده با ویرگول)

در این قسمت می‌توانید یک رشته وارد کنید تا تنظیمات اضافی ClickHouse را مشخص کند. تنظیمات را با ویرگول از هم جدا کنید، مثلاً:

```
allow_experimental_analyzer=1,max_result_rows=100
```

### حداکثر تعداد اتصال HTTP باز در درایور JDBC (پیش‌فرض: 100)

می‌توانید حداکثر تعداد اتصال‌های HTTP در درایور JDBC را که برای اتصال متابیس به ClickHouse استفاده می‌شود، محدود کنید.

### گزینه‌های اضافی JDBC connection string

می‌توانید گزینه‌های اضافی را به JDBC connection string اضافه کنید. گزینه‌ها را با `&` از هم جدا کنید، مثل:

```
connection_timeout=1000&socket_timeout=300000
```

### اجرای دوبارهٔ پرس‌وجو برای اکتشاف ساده

اگر می‌خواهید کاربران قبل از اعمال هر [Summarize](../../questions/query-builder/summarizing-and-grouping.md) یا فیلتر، روی **Run** (دکمهٔ play) کلیک کنند، این گزینه را روی **OFF** قرار دهید.

به‌طور پیش‌فرض، متابیس به محض انتخاب یک گزینهٔ گروه‌بندی از منوی **Summarize** یا یک شرط فیلتر از [منوی drill-through](https://www.metabase.com/learn/metabase-basics/querying-and-dashboards/questions/drill-through)، پرس‌وجو را اجرا می‌کند. اگر پایگاه‌دادهٔ شما کند است، بهتر است اجرای خودکار را غیرفعال کنید تا با هر کلیک، کوئری جدید اجرا نشود.

### انتخاب زمان sync و scan

[sync و scan](../sync-scan.md#choose-when-syncs-and-scans-happen) را ببینید.

### fingerprint دوره‌ای جدول‌ها

> fingerprint دوره‌ای بار روی پایگاه‌دادهٔ شما را افزایش می‌دهد.

این گزینه را روی **ON** قرار دهید تا هر بار متابیس یک [sync](../sync-scan.md#how-database-syncs-work) اجرا می‌کند، یک نمونه از مقادیر را اسکن کند.

پرس‌وجوی fingerprinting اولین ۱۰٬۰۰۰ ردیف هر ستون را بررسی می‌کند و بر اساس آن، تعداد مقادیر یکتا در هر ستون، و حداقل و حداکثر مقادیر ستون‌های عددی و زمانی و غیره را تخمین می‌زند. اگر این گزینه را روی **OFF** بگذارید، متابیس فقط یک‌بار و در زمان راه‌اندازی، برای ستون‌ها fingerprint می‌سازد.

## قابلیت‌های مدل (Model features)

در حال حاضر، قابلیت خاصی برای مدل‌ها در ClickHouse وجود ندارد.

## Danger zone

[بخش Danger zone](../danger-zone.md) را ببینید.
