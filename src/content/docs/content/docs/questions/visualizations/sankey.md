---
title: نمودارهای Sankey
redirect_from:
  - /docs/latest/questions/sharing/visualizations/sankey
---

# نمودارهای Sankey

نمودارهای Sankey نشان می‌دهند داده‌ها چطور در چند گامِ متوالی جریان پیدا می‌کنند. این نمودارها برای نمایش این‌که هر گره (Node) چه سهمی در جریان کلی دارد، بسیار مفید هستند.

![Left-aligned sankey chart](../images/sankey-left-aligned.png)

## شکل داده برای Sankey

برای ساخت یک نمودار Sankey، حداقل به سه ستون در خروجی نیاز دارید:

- **ستون مبدأ (Source column)**: مشخص‌کنندهٔ گره مبدأ در جریان Sankey.
- **ستون مقصد (Target column)**: مشخص‌کنندهٔ گره مقصد.
- **ستون تعداد/مقدار (Count column)**: مقداری که ضخامت یال و گره مقصد را تعیین می‌کند.

اگر داده‌های خام page view داشته باشید که در هر ردیف یک صفحهٔ مبدأ (مثلاً عنوان صفحهٔ ارجاع‌دهنده) و یک صفحهٔ مقصد (مثلاً عنوان صفحهٔ فعلی) باشد، می‌توانید داده‌ها را بر اساس `source` و سپس `target` گروه‌بندی کرده و `count` را روی آن‌ها محاسبه کنید.

![Sankey summarize count and group by source and target](../images/sankey-summarize-count-source-target.png)

شکل دادهٔ زیر برای ساخت نمودار بالا استفاده شده است:

| Source page  | Target page  | Total Visitors |
| ------------ | ------------ | -------------- |
| Entry        | Homepage     | 584            |
| Homepage     | Product Page | 2,700          |
| Product Page | Add to Cart  | 572            |
| Add to Cart  | Checkout     | 2,490          |
| Checkout     | Purchase     | 1,756          |
| Homepage     | Search       | 2,427          |
| Search       | Product Page | 2,027          |
| Product Page | Add to Cart  | 2,203          |
| Add to Cart  | Checkout     | 1,475          |
| Search       | Product Page | 1,563          |
| Checkout     | Purchase     | 1,041          |
| Homepage     | Exit         | 810            |
| Product Page | Checkout     | 815            |
| Checkout     | Purchase     | 2,217          |
| Homepage     | Exit         | 1,020          |

بخش [گزینه‌های داده](#گزینه‌های-دادهٔ-sankey) را هم ببینید.

### وابستگی‌های حلقه‌ای کار نمی‌کنند

اگر بعضی از گره‌های مبدأ به گره‌های مقصدی اشاره کنند که دوباره به همان گره‌های مبدأ برمی‌گردند (چرخه ایجاد شود)، متابیس نمی‌تواند نمودار Sankey رسم کند.

## گزینه‌های دادهٔ Sankey

برای این‌که مشخص کنید متابیس از کدام ستون‌ها به‌عنوان مبدأ، مقصد و مقدار در نمودار Sankey استفاده کند، روی آیکون **settings** در پایین راست کلیک کنید تا تب **Data** باز شود.

![Sankey data options](../images/sankey-data-options.png)

داده‌های شما می‌تواند بیش از سه ستون داشته باشد، اما هر ردیف باید حتماً این سه ستون الزامی را شامل شود: مبدأ، مقصد و یک مقدار برای مقیاس‌دهی اندازهٔ گره مقصد.

## گزینه‌های نمایشی Sankey

می‌توانید چیدمان (alignment) نمودار، نمایش لیبل یال‌ها و رنگ یال‌ها را تغییر دهید.

### چیدمان (Alignment)

می‌توانید برای نمودار Sankey یکی از چیدمان‌های چپ، راست یا Justified را انتخاب کنید. چیدمان مشخص می‌کند گره‌های انتهایی (Leaf/Terminal nodes) چطور نمایش داده شوند.

نموداری که بالاتر دیدید، چپ‌چین است؛ گره‌های انتهایی مثل `Exit` و `Purchase` در سمت چپ تراز شده‌اند.

اگر چیدمان را روی راست بگذارید، گره‌های انتهایی `Exit` و `Purchase` به سمت راست نمودار منتقل می‌شوند:

![Right-aligned sankey chart](../images/sankey-right-aligned.png)

در این مثال، چیدمان Justified ظاهر مشابهی دارد، چون گره‌های انتهایی طوری جابه‌جا می‌شوند که تمام عرض نمودار را پوشش دهند.

### لیبل یال‌ها (Edge labels)

منظور از Edge یا Link همان پیکان‌هایی است که بین گره‌ها کشیده می‌شوند. می‌توانید مشخص کنید روی یال‌ها مقدارشان نمایش داده شود یا نه. گزینه‌های نمایش لیبل‌ها شامل حالت‌های auto، compact و full هستند.

### رنگ یال‌ها (Edge color)

![Sankey gray edges](../images/sankey-gray-edges.png)

گزینه‌های رنگ برای یال‌ها:

- **Gray**: همهٔ یال‌ها خاکستری هستند و فقط رنگ گره‌ها متفاوت است.
- **Source**: رنگ یال بر اساس رنگ گرهٔ مبدأ تعیین می‌شود (گره‌ای که در سمت چپ یال قرار دارد).
- **Target**: رنگ یال بر اساس رنگ گرهٔ مقصد تعیین می‌شود (گره‌ای که در سمت راست یال قرار دارد).


