---
title: پشتیبان‌گیری از متابیس
redirect_from:
  - /docs/latest/operations-guide/backing-up-metabase-application-data
---

<!-- markdownlint-disable-next-line MD025 -->
# پشتیبان‌گیری از متابیس

برای جلوگیری از از دست رفتن داده‌های برنامه (همهٔ پرسش‌ها، داشبوردها، کالکشن‌ها و غیره)، به‌طور منظم از داده‌ها نسخهٔ پشتیبان بگیرید.

متابیس تمام داده‌های زمان‌اجرای خود را در یک پایگاه‌دادهٔ SQL ذخیره می‌کند؛ کافی است از همین پایگاه‌داده پشتیبان بگیرید. در صورت بروز مشکل (مثلاً هنگام به‌روزرسانی) می‌توانید نصب متابیس را از همین نسخهٔ پشتیبان بازیابی کنید.

## پشتیبان‌گیری از پایگاه‌دادهٔ پیش‌فرض H2

اگر هنگام راه‌اندازی متابیس، پایگاه‌دادهٔ برنامه را از طریق متغیرهای محیطی مشخص نکرده باشید، متابیس یک پایگاه‌دادهٔ تع嬬ب‌شدهٔ H2 در پوشهٔ خودش ایجاد می‌کند.

اگر در این مرحله پرسش‌ها و داشبوردهایی دارید که می‌خواهید نگه دارید، بهتر است پیش از ارتقا به نسخهٔ جدید، به یک [پایگاه‌دادهٔ آمادهٔ تولید](./migrating-from-h2.md) مهاجرت کنید.

اگر صرفاً برای استفادهٔ شخصی از متابیس استفاده می‌کنید و می‌خواهید داده‌های برنامه را حفظ کنید، مراحل زیر را انجام دهید.

### اگر متابیس را به‌صورت ایمیج Docker اجرا می‌کنید

اگر از Docker استفاده می‌کنید، در حالت ایده‌آل باید از قبل به یک [پایگاه‌دادهٔ آمادهٔ تولید](./migrating-from-h2.md) مهاجرت کرده باشید.

پیش از مهاجرت به پایگاه‌دادهٔ برنامهٔ تولیدی، فایل پایگاه‌دادهٔ H2 را از داخل کانتینر خارج کنید. برای مثال، اگر نام کانتینر `metabase` است:

```bash
docker cp metabase:/metabase.db/metabase.db.mv.db ./
```

فرمان بالا فایل پایگاه‌داده را در پوشه‌ای که فرمان را اجرا کرده‌اید کپی می‌کند. می‌توانید از این فایل H2 یک کپی بگیرید و از آن برای مهاجرت داده‌ها به پایگاه‌دادهٔ آمادهٔ تولید استفاده کنید. برای جزئیات، به [مهاجرت از H2](./migrating-from-h2.md) مراجعه کنید.

### اگر متابیس را با فایل JAR اجرا می‌کنید

1. به پوشهٔ نصب متابیس بروید.
2. اگر متابیس در حال اجراست، فرآیند آن را متوقف کنید؛ می‌توانید ترمینال را ببندید یا با CTRL-C فرایند را متوقف کنید. اگر متابیس را به‌صورت سرویس اجرا می‌کنید، سرویس را متوقف کنید.
3. فایل پایگاه‌دادهٔ برنامه (به نام `metabase.db.mv.db`) را کپی و در جای امنی نگه دارید. همین کافی است.
4. متابیس را دوباره راه‌اندازی کنید: `java --add-opens java.base/java.nio=ALL-UNNAMED -jar metabase.jar` یا سرویس را مجدداً فعال کنید.

## Amazon RDS برای پایگاه‌دادهٔ برنامه

آمازون برای پشتیبان‌گیری و بازیابی RDS بهترین‌روش‌های خودش را دارد؛ توصیه می‌کنیم پشتیبان‌گیری خودکار RDS را فعال کنید.

دستورالعمل‌ها در [راهنمای کاربر Amazon RDS](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_WorkingWithAutomatedBackups.html) آمده است.

## پایگاه‌دادهٔ PostgreSQL با میزبانی شخصی

اگر PostgreSQL را خودتان میزبانی می‌کنید، کافی است از راهنمای رسمی PostgreSQL برای [پشتیبان‌گیری از پایگاه‌داده](https://www.postgresql.org/docs/current/backup.html) پیروی کنید.

تا زمانی که دمپ پایگاه‌دادهٔ متابیس را داشته باشید، در وضعیت امنی هستید.
