---
title: فعال‌سازی لایسنس تجاری متابیس
redirect_from:
  - /docs/latest/enterprise-guide/activating-the-enterprise-edition
  - /docs/latest/paid-features/activating-the-enterprise-edition
---

# فعال‌سازی لایسنس تجاری متابیس

[نسخه‌های پولی Pro و Enterprise متابیس](https://www.metabase.com/pricing/) با [نسخهٔ رایگان متن‌باز](../installation-and-operation/running-the-metabase-jar-file.md) و همچنین [نسخهٔ Starter در Metabase Cloud](https://www.metabase.com/cloud/) متفاوت‌اند.

## اگر از Metabase Cloud استفاده می‌کنید

اگر در Metabase Cloud ثبت‌نام کرده‌اید یا پلن خود را به Pro یا Enterprise ارتقا داده‌اید، فرایند فعال‌سازی لایسنس و ویژگی‌های تجاری به‌طور خودکار برای شما انجام می‌شود و نیاز به پیکربندی دستی نخواهید داشت.

## اگر متابیس را به‌صورت self‑hosted اجرا می‌کنید

برای استفاده از امکانات Pro/Enterprise در متابیس self‑hosted، باید دو کار انجام دهید:

- نسخهٔ Enterprise متابیس را دانلود کنید.
- لایسنس خود را وارد کنید.

برای دریافت لایسنس می‌توانید یک دورهٔ آزمایشی (Trial) رایگان از [پلن‌های Pro یا Enterprise](https://www.metabase.com/pricing/) فعال کنید. هر دو پلن را می‌توانید به‌صورت self‑hosted یا روی Metabase Cloud اجرا کنید.

### دانلود نسخهٔ Enterprise

- [ایمیج Docker نسخهٔ Enterprise](https://hub.docker.com/r/metabase/metabase-enterprise/) با نام `metabase/metabase-enterprise:latest` (پیشنهاد‌شده).
- [فایل JAR نسخهٔ Enterprise](https://downloads.metabase.com/enterprise/latest/metabase.jar).

همچنین باید یک [پایگاه‌دادهٔ اپلیکیشن](../installation-and-operation/configuring-application-database.md) اختصاصی تنظیم کنید تا داده‌های متابیس در آن ذخیره شوند.

### فعال‌سازی لایسنس

برای فعال‌کردن لایسنس هنگام اجرای متابیس self‑hosted دو روش دارید:

- **زمانی که متابیس در حال اجراست:** به **Settings** > **Admin settings** بروید و در ستون کناری سمت چپ روی **License and Billing** کلیک کنید. توکن لایسنس خود را در بخش **License** وارد کرده و روی **Activate** کلیک کنید.

یا:

- **قبل از راه‌اندازی متابیس:** می‌توانید توکن لایسنس را با استفاده از [متغیر محیطی `MB_PREMIUM_EMBEDDING_TOKEN`](../configuring-metabase/environment-variables.md#mb_premium_embedding_token) تنظیم کنید. این متغیر محیطی باید **قبل از شروع به کار متابیس** مقداردهی شود.

## ارتقا از نسخهٔ متن‌باز self‑hosted به پلن Pro یا Enterprise

برای دسترسی به همهٔ قابلیت‌هایی که با ارتقا به یک پلن _self‑hosted_ [Pro یا Enterprise](https://www.metabase.com/pricing/) در اختیار شما قرار می‌گیرد، باید:

1. به نسخهٔ Enterprise متابیس مهاجرت کنید (این موضوع هم برای پلن Pro و هم Enterprise صدق می‌کند).
2. لایسنس خود را فعال کنید.

فرض می‌کنیم از قبل از یک [پایگاه‌دادهٔ اپلیکیشن مناسب محیط تولید](../installation-and-operation/configuring-application-database.md) استفاده می‌کرده‌اید. در این صورت پیشنهاد می‌کنیم:

1. از [پایگاه‌دادهٔ اپلیکیشن خود بک‌آپ بگیرید](./backing-up-metabase-application-data.md).
2. نسخهٔ Enterprise متناسب با نسخهٔ فعلی متابیس خود را دانلود کنید. برای مثال اگر ایمیج Docker مربوط به نسخهٔ {{site.latest_version}} را اجرا می‌کنید، باید به ایمیج Docker نسخهٔ {{site.latest_enterprise}} (نسخهٔ Enterprise همان نسخه) سوئیچ کنید. برای دیدن فهرست نسخه‌های موجود برای هر دو نسخهٔ متن‌باز و Enterprise، به صفحهٔ [Metabase releases](https://github.com/metabase/metabase/releases) در گیت‌هاب مراجعه کنید.
3. اجرای نسخهٔ متن‌باز متابیس فعلی را متوقف کنید.
4. ایمیج Docker یا فایل jar نسخهٔ Enterprise را که دانلود کرده‌اید جایگزین نسخهٔ قبلی کنید.
5. متابیس را مانند همیشه، این بار با ایمیج یا jar نسخهٔ Enterprise راه‌اندازی کنید. نیازی به تغییر در پایگاه‌دادهٔ اپلیکیشن‌تان نیست (البته از آن طبق مرحلهٔ اول بک‌آپ گرفته‌اید، درست است؟).
6. [لایسنس خود را فعال کنید](#activate-your-license). تا زمانی که لایسنس را فعال نکرده باشید، امکان استفاده از قابلیت‌های جدید را نخواهید داشت.

مهاجرت به نسخهٔ Enterprise همهٔ سؤالات، داشبوردها، کاربران، تنظیمات و سایر داده‌های موجود در متابیس فعلی شما را حفظ می‌کند.

نگران نباشید؛ این فرایند نباید باعث از دست‌رفتن کارهای شما شود و اگر در هر مرحله به مشکل برخوردید، ما [در کنار شما هستیم](https://www.metabase.com/help-premium).

## اعتبارسنجی توکن

برای اعتبارسنجی توکن و حفظ دسترسی به قابلیت‌های Pro/Enterprise، متابیس باید بتواند به اینترنت دسترسی داشته باشد، به‌طور مشخص به آدرس زیر:

```
https://token-check.metabase.com/api/[token-id]/v2/status
```

(به‌جای `[token-id]` باید شناسهٔ توکن خود را قرار دهید.)

اگر متابیس نتواند توکن را اعتبارسنجی کند، قابلیت‌های Pro/Enterprise غیرفعال خواهند شد، اما متابیس همچنان مانند نسخهٔ متن‌باز به کار خود ادامه می‌دهد.

اگر امکان دسترسی متابیس به اینترنت را ندارید، با ما دربارهٔ [استفاده از متابیس air‑gapped](https://www.metabase.com/product/air-gapping) صحبت کنید.

## مسیردهی ترافیک خروجی متابیس از طریق پراکسی

اگر لازم است ترافیک خروجی متابیس را از طریق یک پراکسی در شبکهٔ خود عبور دهید، هنگام راه‌اندازی متابیس می‌توانید از فرمان زیر استفاده کنید:

```
java -Dhttps.proxyHost=[your proxy's hostname or ip] -Dhttps.proxyPort=[your proxy's port] -jar metabase.jar
```

یا اگر از کانتینرها استفاده می‌کنید، باید متغیر محیطی `JAVA_TOOL_OPTIONS` را مقداردهی کنید:

```
JAVA_TOOL_OPTIONS=-Dhttps.proxyHost=[your proxy's hostname or ip] -Dhttps.proxyPort=[your proxy's port]
```

بسته به پیکربندی سازمان شما، ممکن است لازم باشد مراحل تنظیم دیگری نیز انجام دهید. اگر فرمان بالا در محیط شما به‌درستی کار نکرد، بهتر است با تیم زیرساخت یا DevOps داخلی خود برای تنظیم صحیح پراکسی مشورت کنید.

## آی‌پی‌هایی که باید در فایروال مجاز شوند

اگر متابیس را پشت یک فایروال اجرا می‌کنید که اتصال‌های خروجی را مسدود می‌کند، **باید اتصال‌های خروجی stateful روی پورت ۴۴۳ را برای تمام آی‌پی‌های زیر مجاز کنید**:

```
23.23.111.13
44.199.18.109
44.212.138.188
```

برای اعتبارسنجی لایسنس از طریق درخواست به `token-check.metabase.com`، متابیس درخواست‌های HTTP از نوع GET به این آی‌پی‌ها ارسال می‌کند و پاسخ آن‌ها را پردازش می‌کند. اگر به دلایل امنیتی نمی‌توانید این اتصال‌های خروجی را باز کنید، لطفاً [با ما تماس بگیرید](https://www.metabase.com/help-premium).

## نکته‌ای دربارهٔ استقرار روی زیرساخت‌های دارای Zscaler

اگر متابیس را درون زیرساختی اجرا می‌کنید که از Zscaler استفاده می‌کند، موارد زیر را مدنظر قرار دهید:

1. با تیم شبکهٔ خود هماهنگ کنید و به آن‌ها اطلاع دهید که متابیس برای فعال‌ماندن قابلیت‌های پولی نیاز دارد بررسی توکن (token check) انجام دهد. اگر به نسخهٔ air‑gapped متابیس نیاز دارید، [با ما تماس بگیرید](https://www.metabase.com/help-premium).
2. مطمئن شوید Zscaler نقش پراکسی یا DNS برای سروری را که متابیس روی آن اجرا می‌شود بازی نمی‌کند. متابیس باید بدون عبور از درگاه‌های پروکسی، به‌طور مستقیم به سرویس بررسی توکن متصل شود.
3. مطمئن شوید سروری که متابیس روی آن اجرا می‌شود از گواهی‌های ریشهٔ Zscaler به‌صورت سراسری برای همهٔ وب‌سایت‌ها استفاده نمی‌کند؛ در غیر این صورت، ماشین مجازی جاوا (JVM) که متابیس در آن اجرا می‌شود گواهی را نامعتبر تشخیص خواهد داد.
