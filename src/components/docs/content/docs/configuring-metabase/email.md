---
title: تنظیم ایمیل
summary: آموزش تنظیم ایمیل در متابیس برای فعال‌سازی اشتراک داشبورد و هشدارها.
redirect_from:
  - /docs/latest/administration-guide/02-setting-up-email
---

<!-- markdownlint-disable-next-line MD025 -->
# تنظیم ایمیل

بعد از اتصال پایگاه‌داده به متابیس، بهتر است یک حساب ایمیل پیکربندی کنید تا اعلان‌های سیستمی برای کاربران سازمان شما ارسال شود. متابیس از ایمیل برای بازیابی گذرواژه، آماده‌سازی کاربران جدید و اطلاع‌رسانی رویدادها استفاده می‌کند (نگاه کنید به [اشتراک داشبوردها](../dashboards/subscriptions.md) و [هشدارها](../questions/alerts.md)).

هم مدیران و هم افرادی که [دسترسی به تنظیمات](../permissions/application.md#settings-access) دارند می‌توانند ایمیل را تنظیم کنند.

## ایمیل در Metabase Cloud

مسیر: **Admin settings > Settings > Email**

در Metabase Cloud می‌توانید از سرور SMTP پیش‌فرض استفاده کنید یا یک سرور سفارشی تنظیم کنید.

### سرور SMTP پیش‌فرض در Metabase Cloud

به‌صورت پیش‌فرض، Metabase Cloud مدیریت یک سرور ایمیل را بر عهده می‌گیرد، بنابراین لازم نیست ایمیل را تنظیم کنید.

در عین حال می‌توانید این موارد را شخصی‌سازی کنید:

- نام نمایشی برای حساب ایمیل Cloud (نام «from»). ایمیل همچنان از یک آدرس متابیس ارسال می‌شود.
- آدرس ایمیلی برای دریافت پاسخ‌ها (reply-to).

وقتی متابیس سرور SMTP را مدیریت می‌کند، نمی‌توانید آدرس فرستنده را عوض کنید. اگر می‌خواهید متابیس از دامنهٔ دیگری ایمیل ارسال کند، باید سرور SMTP خودتان را معرفی کنید (بخش بعدی).

### سرور SMTP سفارشی در Metabase Cloud

{% include plans-blockquote.html feature="Custom SMTP server on Metabase Cloud" %}

مسیر: **Admin settings > Settings > Email > Set up a custom SMTP server**

به‌طور پیش‌فرض، Metabase Cloud سرور SMTP را برای شما مدیریت می‌کند؛ اما اگر بخواهید می‌توانید از سرور SMTP خودتان استفاده کنید.

دلایلی که ممکن است بخواهید سرور SMTP خود را بیاورید:

- شخصی‌سازی دامنهٔ From (مثلاً در صورت [سفیدبرچسب‌کردن متابیس](./appearance.md)).
- جلوگیری از عبور ایمیل‌ها از سرویس‌های شخص ثالث.
- کنترل کامل روی اعتبار IP، لاگ‌ها و پایش.
- کنترل کامل روی ممیزی (auditing).

هنگام تنظیم سرور SMTP سفارشی در Metabase Cloud این فیلدها را پیکربندی می‌کنید:

- **SMTP HOST**: آدرس سرور SMTP که ایمیل‌های شما را مدیریت می‌کند (مثلاً `smtp.yourservice.com`).
- **SMTP PORT**: پورتی که سرور SMTP برای ارسال ایمیل‌های خروجی استفاده می‌کند. فقط پورت‌های رمزنگاری‌شده پشتیبانی می‌شوند:
  - 465 (SSL)
  - 587 (TLS)
  - 2525 (STARTTLS)
- **SMTP SECURITY**: پروتکل امنیتی اتصال:
  - SSL
  - TLS
  - STARTTLS
- **SMTP USERNAME**: نام کاربری حساب SMTP.
- **SMTP PASSWORD**: گذرواژهٔ حساب SMTP.

همچنین باید مشخص کنید:

- **From address**: آدرس ایمیلی که به‌عنوان فرستنده نمایش داده می‌شود.
- **Reply-to address**: آدرسی که پاسخ‌ها به آن ارسال می‌شوند (در صورت تفاوت با From).

هر زمان بخواهید می‌توانید این تنظیمات را ویرایش کنید و بین سرور SMTP سفارشی و سرور مدیریت‌شده توسط Metabase Cloud جابه‌جا شوید.

## پیکربندی حساب ایمیل

مسیر: **Admin settings > Settings > Email**

برای این‌که متابیس بتواند برای افراد پیام بفرستد، باید یک حساب ایمیل برای ارسال از طریق **SMTP** (Simple Mail Transfer Protocol) تنظیم کنید. SMTP یک استاندارد ایمیل است که در ترکیب با SSL/TLS، امنیت انتقال ایمیل را تأمین می‌کند.

برای شروع، از منوی بالای سمت راست وارد پنل مدیر شوید، سپس در صفحهٔ Settings روی **Email** در منوی سمت چپ کلیک کنید.

باید فرمی مشابه زیر ببینید:

![Email Credentials](images/EmailCredentials.png)

در این فرم این موارد را تنظیم می‌کنید:

- **SMTP HOST**: آدرس سرور SMTP که ایمیل‌های شما را مدیریت می‌کند.
- **SMTP PORT**: پورتی که سرور SMTP برای ارسال ایمیل‌های خروجی استفاده می‌کند.
- **SMTP SECURITY**:
  - None
  - SSL
  - TLS
  - STARTTLS
- **SMTP USERNAME**: نام کاربری حساب SMTP.
- **SMTP PASSWORD**: گذرواژهٔ حساب SMTP.

همچنین باید مشخص کنید:

- **From address**: آدرس ایمیلی که می‌خواهید به‌عنوان فرستندهٔ ایمیل‌ها استفاده شود.
- **Reply-to address**: آدرس ایمیلی که پاسخ‌ها به آن ارسال می‌شود (در صورت تفاوت با From).

## افزودن گیرندگان به‌صورت CC یا BCC

به‌صورت پیش‌فرض، متابیس گیرندگان ایمیل را با قرار دادن آن‌ها در فهرست BCC (Blind Carbon Copy) پنهان می‌کند. اگر ارائه‌دهندهٔ ایمیل شما با گیرندگان BCC مشکل دارد و برایتان مهم نیست که افراد ببینند چه کسانی در ایمیل کپی شده‌اند، می‌توانید از متابیس بخواهید گیرندگان را به‌جای BCC در CC (Carbon Copy) قرار دهد.

### تنظیمات پیشنهادی ایمیل

- استفاده از SSL به‌شدت توصیه می‌شود، چون امنیت بیشتری فراهم می‌کند و حساب شما را در برابر تهدیدها بهتر محافظت می‌کند.
- اگر سرویس ایمیل شما فهرست مجاز (whitelist) برای فرستنده‌ها دارد، حتماً آدرسی را که در فیلد **From address** وارد می‌کنید در آن فهرست قرار دهید تا شما و هم‌تیمی‌ها همهٔ ایمیل‌های متابیس را دریافت کنید.

## نکته‌ها برای سرویس‌های ایمیل رایج

- [Google Apps](#google-apps)
- [Amazon SES](#amazon-ses)
- [Mandrill](#mandrill)

### Google Apps

1. در فیلد **SMTP HOST** مقدار `smtp.gmail.com` را وارد کنید.
2. در فیلد **SMTP PORT** عدد `465` را وارد کنید.
3. در فیلد **SMTP SECURITY** مقدار **SSL** را انتخاب کنید.
4. در فیلد **SMTP USERNAME** آدرس ایمیل Google Apps خود (مثلاً `hello@yourdomain.com`) را وارد کنید.
5. در فیلد **SMTP PASSWORD** گذرواژهٔ Google Apps خود را وارد کنید.
6. در فیلد **From address** آدرس ایمیلی را وارد کنید که می‌خواهید به‌عنوان فرستندهٔ اعلان‌های سیستمی استفاده شود.

### Amazon SES

1. به آدرس [https://console.aws.amazon.com/ses](https://console.aws.amazon.com/ses) وارد شوید.
2. از منوی کناری روی **SMTP Settings** کلیک کنید.
3. در صفحهٔ اصلی روی **Create My SMTP Credentials** کلیک کنید.
4. در گفت‌وگوی **Create User for SMTP** یک کاربر بسازید و روی **Create** کلیک کنید.
5. سپس **Show User SMTP Credentials** را انتخاب کنید تا اعتبارنامه‌های SMTP کاربر را ببینید.
6. به فرم پنل مدیریت متابیس برگردید و اطلاعات را در آن وارد کنید.

بررسی کنید که آیا [محدودیت‌های ایمیل](https://docs.aws.amazon.com/ses/latest/dg/quotas.html) روی سرور SES شما اعمال می‌شود یا نه؛ شاید ترجیح بدهید گیرندگان را از طریق گروه‌ها مدیریت کنید.

### Mandrill

1. وارد حساب Mandrill شوید و اعتبارنامه‌ها را در صفحهٔ **SMTP & API Info** پیدا کنید.
2. گذرواژهٔ SMTP شما هر کلید API فعال حساب است، **نه** گذرواژهٔ ورود به Mandrill.
3. هرچند Mandrill **پورت 587** را پیشنهاد می‌کند، [هر پورتی که Mandrill پشتیبانی کند](https://mailchimp.com/developer/transactional/docs/smtp-integration/#the-basics) برای SMTP قابل استفاده است.
4. سپس به فرم پنل مدیریت متابیس برگردید و اطلاعات را وارد کنید.

## دامنه‌های تأییدشده برای اعلان‌ها

{% include plans-blockquote.html feature="Approved domains for notifications" %}

دامنه‌های مجاز برای آدرس‌های ایمیل در [اشتراک‌های داشبورد](../dashboards/subscriptions.md) و [هشدارها](../questions/alerts.md) جدید.

با تعریف دامنه‌های تأییدشده می‌توانید مشخص کنید هشدارها و اشتراک‌ها به چه دامنه‌هایی ارسال شوند. این محدودیت فقط روی ارسال ایمیل به افرادی اعمال می‌شود که حسابی در آن متابیس ندارند. افرادی که در متابیس حساب دارند و [با امنیت سطر یا ستون محدود نشده‌اند](../permissions/row-and-column-security.md)، می‌توانند به هر کاربر دیگری در همان متابیس ایمیل بفرستند.

برای اجازه‌دادن به همهٔ دامنه‌ها، فیلد را خالی بگذارید (پیش‌فرض همین است).

برای تعریف چند دامنه، هر دامنه را بدون فاصله و با کاما جدا کنید (مثلاً `"domain1,domain2"`).

همچنین می‌توانید این ویژگی را با متغیر محیطی [`MB_SUBSCRIPTION_ALLOWED_DOMAINS`](../configuring-metabase/environment-variables.md#mb_subscription_allowed_domains) تنظیم کنید.

> این تنظیم روی اشتراک‌ها و هشدارهای موجود تأثیری ندارد.

## پیشنهاد گیرندگان در اشتراک‌ها و هشدارها

{% include plans-blockquote.html feature="Configuring suggested recipients" %}

با این تنظیمات کنترل می‌کنید هنگام ساخت [اشتراک داشبورد](../dashboards/subscriptions.md) یا [هشدار](../questions/alerts.md)، چه گیرندگانی به‌عنوان پیشنهاد نمایش داده شوند. برای نمونه، می‌توانید پیشنهادها را فقط به افرادی محدود کنید که در همان [گروه‌ها](../people-and-groups/managing.md#groups) عضو هستند.

گزینه‌ها:

- پیشنهاد همهٔ کاربران
- فقط پیشنهاد کاربرانِ عضو در گروه‌های مشترک
- بدون نمایش پیشنهاد

کاربرانی که [محدودیت سطر یا ستون](../permissions/row-and-column-security.md) دارند پیشنهادها را نخواهند دید.

## مطالعهٔ بیشتر

- [هشدارها](../questions/alerts.md)
- [اشتراک‌های داشبورد](../dashboards/subscriptions.md)
- [مجوزهای اعلان](../permissions/notifications.md)
- [تنظیم Slack](./slack.md)
- [تحلیل استفاده (Usage Analytics)](../usage-and-performance-tools/usage-analytics.md)
