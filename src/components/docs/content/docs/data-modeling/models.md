---
title: "مدل‌ها"
redirect_from:
  - /docs/latest/users-guide/models
---

# مدل‌ها

مدل‌ها یک بلوک سازندهٔ اساسی در متابیس هستند. مدل‌ها داده را از جدول یا جداول دیگر از همان پایگاه داده گردآوری می‌کنند تا انواع سؤال‌هایی که افراد از داده می‌پرسند را پیش‌بینی کنند. می‌توانید آن‌ها را به‌عنوان جداول مشتق‌شده، یا نوع خاصی از سؤال ذخیره‌شده در نظر بگیرید که قرار است به‌عنوان نقطهٔ شروع برای سؤال‌های جدید استفاده شود. می‌توانید یک مدل را بر اساس یک سؤال SQL یا query builder بنا کنید، که به این معنی است که می‌توانید ستون‌های محاسبه‌شدهٔ سفارشی در مدل خود قرار دهید.

مدل‌ها:

- به شما امکان می‌دهند توضیحات ستون را به‌روزرسانی کنید و ابرداده را سفارشی کنید تا نقاط شروع عالی برای اکتشاف ایجاد کنید.
- در نتایج جستجو بالاتر ظاهر می‌شوند و وقتی کاربران دیگر سؤال‌های جدید شروع می‌کنند برجسته می‌شوند تا استفاده مجدد را ترویج دهند.
- در کلکسیون‌ها زندگی می‌کنند تا از schemaهای پایگاه دادهٔ شلوغ جدا نگه داشته شوند.
- می‌توانند [رکوردهای جداگانه را در نتایج جستجو نمایش دهند](#surface-individual-records-in-search-by-matching-against-this-column).
- می‌توانند [برای بارگذاری سریع‌تر پایدار شوند](./model-persistence.md).

برای اطلاعات بیشتر دربارهٔ چرا و چگونه از مدل‌ها استفاده کنیم، به [مقالهٔ Learn ما دربارهٔ مدل‌ها][learn-models] مراجعه کنید.

## نحوهٔ استفاده از مدل‌ها

می‌توانید از مدل‌ها برای موارد زیر استفاده کنید:

- ایجاد، اوه، مدل‌ها، با مدل در اینجا به معنای یک توصیف شهودی از یک مفهوم در کسب‌وکار شما که آن را به‌عنوان مجموعه‌ای از ستون‌ها کدگذاری می‌کنید. یک مدل مثال می‌تواند یک "مشتری" باشد، که یک جدول است که اطلاعات مشتری را از چندین جدول جمع می‌کند و ستون‌های محاسبه‌شده اضافه می‌کند، مثل اضافه کردن یک ستون lifetime value (LTV). این مدل [مقیاس‌ها و ابعاد][measures-dimensions] را نشان می‌دهد که فکر می‌کنید برای درک شما از مشتریان‌تان مرتبط هستند.
- به افراد امکان دهید نتایج کوئری‌های SQL را با query builder کاوش کنند (به شرطی که [انواع ستون را تنظیم کنید](#column-type)).
- جداول خلاصه ایجاد کنید که داده را از چندین جدول می‌کشند یا تجمیع می‌کنند.
- جداول را با ستون‌ها و ردیف‌های غیرضروری فیلترشده تمیز کنید.

ایده با مدل‌ها این است که به افراد دیگر یک "جدول نقطهٔ شروع" خوب بدهید که پاسخ دادن به هر سؤالی که دربارهٔ موضوع مدل‌سازی‌شده دارند را آسان‌تر می‌کند.

## ایجاد یک مدل

ابتدا، برای مدل‌هایی که از قبل وجود دارند جستجو کنید. اگر نمی‌توانید یکی را پیدا کنید که نیازهایتان را برآورده کند، می‌توانید یک مدل ایجاد کنید:

- [از صفر](#create-a-model-from-scratch)، یا
- [از یک سؤال ذخیره‌شده](#create-a-model-from-a-saved-question).

مدل‌هایی که ایجاد می‌کنید به‌طور خودکار [به کلکسیون فعلی pin می‌شوند](../exploration-and-organization/collections.md#pinned-items).

### ایجاد یک مدل از صفر

- به تب Models در نوار کناری بروید. ممکن است نیاز داشته باشید آن را با استفاده از دکمه در گوشهٔ بالا سمت چپ باز کنید، سپس به پایین به بخش برچسب‌خورده **Data** اسکرول کنید و **Models** را انتخاب کنید. سپس روی دکمهٔ **+** در گوشهٔ بالا سمت راست کلیک کنید.
- یا [command palette](https://www.metabase.com/docs/latest/exploration-and-organization/exploration#command-palette) را باز کنید و "model." را تایپ کنید. سپس روی عمل **New model** کلیک کنید.

حالا یا query builder یا یک کوئری native (اگر می‌خواهید از SQL استفاده کنید) را انتخاب کنید. مزیت استفاده از query builder این است که متابیس قادر خواهد بود برخی از ابرداده را برای شما پر کند؛ اگر از SQL استفاده می‌کنید، باید آن ابرداده را به صورت دستی پر کنید.

بعد، داده‌هایتان را انتخاب کنید، کوئری‌تان را ایجاد کنید و آن را ذخیره کنید.

مدل‌هایی که ایجاد می‌کنید به‌طور خودکار [به کلکسیون فعلی pin می‌شوند](../exploration-and-organization/collections.md#pinned-items).

### ایجاد یک مدل از یک سؤال ذخیره‌شده

1. با استفاده از query builder یا ویرایشگر SQL [یک سؤال بپرسید][question]، یا یک سؤال ذخیره‌شدهٔ موجود را که می‌خواهید به یک مدل تبدیل کنید انتخاب کنید.
2. سؤال را ذخیره کنید.
3. روی **...** > **Turn this into a model** کلیک کنید.

![تبدیل یک سؤال ذخیره‌شده به یک مدل](./images/turn-into-a-model.png)

## جزئیات مدل

برای مشاهدهٔ جزئیات یک مدل، به مدل بروید و روی دکمهٔ **info** در گوشهٔ بالا سمت راست کلیک کنید. اینجا چندین تب می‌بینید:

- **Overview**: شامل توضیحات، Creator و Last Editor، و لیست فیلدهای موجود در مدل. و همچنین [Entity ID مدل](../installation-and-operation/serialization.md#metabase-uses-entity-ids-to-identify-and-reference-metabase-items).
- **History**: تغییرات مدل و توسط چه کسی را فهرست می‌کند.
- **Relationships**: فهرست می‌کند که کدام سؤال‌ها از مدل استفاده می‌کنند و مدل به کدام جداول لینک شده است.
- **Actions**: اکشن‌های ایجادشده بر اساس مدل را فهرست می‌کند.
- **Insights**: اطلاعات دربارهٔ [استفاده از مدل](../usage-and-performance-tools/usage-analytics.md). فقط برای ادمین‌ها در [پلن Pro یا Enterprise](https://www.metabase.com/pricing/) قابل مشاهده است.

## اضافه کردن ابرداده به ستون‌ها در یک مدل

ابرداده راز موفقیت مدل‌ها است. وقتی یک کوئری SQL می‌نویسید، متابیس می‌تواند نتایج را نمایش دهد، اما نمی‌تواند "بداند" چه نوع داده‌ای برمی‌گرداند (مثل آنچه با سؤال‌های ساخته‌شده با query builder می‌تواند). آنچه این در عمل به معنای آن است که افراد نمی‌توانند نتایج را با query builder کاوش کنند، چون متابیس نمی‌فهمد نتایج چیست. با این حال، با مدل‌ها، می‌توانید به متابیس بگویید چه نوع داده‌ای در هر ستون برگشتی است تا متابیس همچنان بتواند جادوی کوئری خود را انجام دهد. ابرداده همچنین فیلتر کردن را بهتر می‌کند با نمایش ویجت فیلتر صحیح، و به متابیس کمک می‌کند تا ویژوالیزیشن درست را برای نتایج انتخاب کند.

اگر فقط یک نوع ابرداده تنظیم می‌کنید، **Column type** را تنظیم کنید تا متابیس بداند با چه نوع داده‌ای کار می‌کند.

### نام نمایشی

آنچه افراد به‌عنوان نام ستون می‌بینند.

### توضیحات

جایی برای نوشتن بافت مفید برای ستون.

### ستون پایگاه داده که این به آن نگاشت می‌شود

برای مدل‌های مبتنی بر کوئری‌های SQL، می‌توانید به متابیس بگویید که آیا ستون همان نوع یک ستون پایگاه دادهٔ موجود را دارد.

### نوع ستون

می‌توانید [نوع ستون][column-type] را تنظیم کنید. پیش‌فرض "No special type" است.

اگر مدل شما مبتنی بر یک کوئری SQL است و می‌خواهید افراد بتوانند نتایج را با query builder کاوش کنند، باید [نوع ستون](./semantic-types.md) را برای هر ستون در مدل خود تنظیم کنید.

### این ستون باید در... ظاهر شود

می‌توانید مشخص کنید که آیا یک ستون باید در نمای جدول ظاهر شود، یا فقط در نمای جزئیات (وقتی روی entity/primary key برای ردیف کلیک می‌کنید).

- Table and detail views
- Detail views only

### نمایش به‌صورت

- Text
- Link (این یک URL است که افراد باید بتوانند روی آن کلیک کنند)

### نمایش رکوردهای جداگانه در جستجو با تطبیق با این ستون

برای فیلدهای رشته در رکوردها با کلیدهای entity عدد صحیح، متابیس به شما گزینه می‌دهد که مقادیر در آن فیلد را وقتی افراد متابیس شما را جستجو می‌کنند نمایش دهد. اساساً، متابیس این مقادیر را ایندکس می‌کند و آن‌ها را برای موتور جستجوی متابیس در دسترس قرار می‌دهد. این گزینه وقتی مفید است که افراد اغلب می‌خواهند مستقیماً به یک رکورد جداگانه در مدل شما بپرند.

به‌عنوان مثال، اگر یک مدل با حساب‌ها دارید، می‌توانید این گزینه را برای یک ستون که نام یا ایمیل حساب را فهرست می‌کند روشن کنید تا افراد بتوانند به سرعت برای حساب‌های خاص در مدل از هر جای متابیس شما جستجو کنند. وقتی افراد روی یک رکورد در نتایج جستجو کلیک می‌کنند، متابیس مستقیماً به مدل و جزئیات object برای آن رکورد می‌پرد.

برخی محدودیت‌ها برای این ایندکس‌گذاری وجود دارد:

- فیلد ایندکس‌شده باید یک نوع متن/رشته باشد.
- رکورد حاوی فیلد باید یک کلید entity عدد صحیح داشته باشد.
- برای سریع نگه داشتن جستجوی شما، متابیس فقط 5000 مقدار منحصر به فرد از آن فیلد را ایندکس می‌کند، بنابراین این گزینه انتخاب بهتری برای روشن کردن برای جداول با تعداد زیادی رکورد نیست.

## ویرایش کوئری یک مدل

می‌توانید کوئری یک مدل را با کلیک روی فلش پایین کنار نام مدل و کلیک روی **Edit query definition** ویرایش کنید. وقتی ویرایش می‌کنید، مطمئن شوید که تغییراتتان را ذخیره می‌کنید. برخلاف سؤال‌ها، که از شما می‌خواهند به‌عنوان یک سؤال جدید ذخیره کنید، هر تغییری اینجا مدل موجود را overwrite می‌کند. اگر می‌خواهید یک مدل جدید از یک مدل موجود ایجاد کنید، **Duplicate this model** را از نوار کناری مدل (آیکون دو مربع همپوشانی) انتخاب کنید.

## نمای لیست مدل

![مشاهدهٔ یک مدل به‌صورت لیست](./images/model-list.png)

نمای لیست به شما کمک می‌کند رکوردها را یکی یکی کاوش کنید به جای مرتب‌سازی از طریق جداول بزرگ. می‌توانید چیدمان را سفارشی کنید تا مهم‌ترین فیلدها را برجسته کنید.


برای مشاهدهٔ یک مدل به‌صورت لیست:

1. به مدل بروید.
2. روی منوی سه نقطه کلیک کنید.
3. **Edit metadata** را انتخاب کنید.
4. به تب **Settings** بروید.
5. زیر "What should the default view of this data be?"، به **List** toggle کنید.

![ویرایش لیست مدل](./images/model-list-edit.png)

### سفارشی کردن نمای لیست مدل

![سفارشی کردن چیدمان لیست](./images/customize-list.png)

می‌توانید نحوهٔ ظاهر داده را با کلیک **Customize the List layout** سفارشی کنید.

هر آیتم در لیست شامل موارد زیر است:

- **یک آیکون entity.** اگر رکورد یک لینک تصویر دارد، تصویر را نشان می‌دهد، که می‌توانید هر زمان مخفی کنید.
- **یک ستون چپ** که عنوان یا شناسهٔ اصلی را نشان می‌دهد.
- **یک ستون راست** برای تا 5 ستون اضافی.

می‌توانید:

- **برای ستون‌ها جستجو کنید** با استفاده از جعبه جستجوی "Find a column...".
- **ستون‌ها را بکشید** از لیست در دسترس به منطقهٔ ستون چپ یا ستون‌های راست.
- **ستون‌ها را مرتب‌سازی مجدد کنید** با کشیدن آن‌ها درون مناطق مربوطه‌شان.
- **ستون‌ها را حذف کنید** با کلیک روی X روی ستون.

می‌توانید یک پیش‌نمایش در پایین با دادهٔ نمونه از مدل خود ببینید.

روی **Done** کلیک کنید تا تغییراتتان را ذخیره کنید.

## شروع یک سؤال از یک مدل

به [پرسیدن سؤال‌ها][question] مراجعه کنید.

## [ارجاع به یک مدل در ویرایشگر کوئری SQL](../questions/native-editor/referencing-saved-questions-in-queries.md)

می‌توانید به یک مدل در یک کوئری SQL ارجاع دهید دقیقاً مثل اینکه می‌توانید به یک سؤال ذخیره‌شده ارجاع دهید:

```sql
{% raw %}
SELECT * FROM {{#1-customer-model}}
{% endraw %}
```

یا به‌عنوان یک [عبارت جدول مشترک (CTE)][cte]:

```sql
{% raw %}
WITH model AS {{#3807-invoice-model}}
SELECT *
FROM model;
{% endraw %}
```

به سادگی تایپ کردن `{% raw %}{{#}} {% endraw %}` به شما امکان می‌دهد برای مدل‌ها جستجو کنید (به‌عنوان مثال، می‌توانید `{% raw %}{{#customer}}{% endraw %}` را تایپ کنید تا مدل‌ها، سؤال‌ها و جداول با کلمه "customer" در عنوان را جستجو کنید.

همچنین می‌توانید از نوار کناری مرجع داده برای مرور مدل‌های در دسترس استفاده کنید. برای باز کردن نوار کناری مرجع داده، روی آیکون **book** کلیک کنید.

## تاریخچهٔ نسخهٔ مدل

برای [سؤال‌ها](../questions/start.md)، [داشبوردها](../dashboards/start.md)، و مدل‌ها، متابیس یک تاریخچهٔ نسخه برای پانزده نسخهٔ قبلی آن آیتم نگه می‌دارد. می‌توانید تغییرات را مشاهده کنید و به نسخه‌های قبلی برگردید.

به [تاریخچه](../exploration-and-organization/history.md) مراجعه کنید.

## حذف یک مدل

می‌توانید مدل‌های منسوخ یا غیرضروری را به سطل زباله منتقل کنید، یا آن‌ها را به‌طور دائمی حذف کنید. حذف یک مدل روی سؤال‌هایی که از آن به‌عنوان منبع داده استفاده می‌کنند تأثیر می‌گذارد.

به [حذف و بازیابی آیتم‌ها](../exploration-and-organization/delete-and-restore.md) مراجعه کنید.

## تأیید یک مدل

به [تأیید محتوا](../exploration-and-organization/content-verification.md) مراجعه کنید.

## پایداری مدل

به [پایداری مدل](./model-persistence.md) مراجعه کنید

## مطالعهٔ بیشتر

- [مدل‌ها در متابیس][learn-models]
- [عیب‌یابی مدل‌ها][troubleshooting-models].

[column-type]: ./semantic-types.md
[cte]: https://www.metabase.com/learn/sql/working-with-sql/sql-cte
[measures-dimensions]: https://www.metabase.com/learn/grow-your-data-skills/data-fundamentals/dimensions-and-measures
[question]: ../questions/start.md
[learn-models]: https://www.metabase.com/learn/metabase-basics/getting-started/models
[troubleshooting-models]: ../troubleshooting-guide/models.md
